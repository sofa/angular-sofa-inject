/**
 * angular-sofa-inject - v0.1.0 - Mon Feb 23 2015 12:03:22 GMT+0100 (CET)
 * http://www.sofa.io
 *
 * Copyright (c) 2014 CouchCommerce GmbH (http://www.couchcommerce.com / http://www.sofa.io) and other contributors
 * THIS SOFTWARE CONTAINS COMPONENTS OF THE SOFA.IO COUCHCOMMERCE SDK (WWW.SOFA.IO)
 * IT IS PROVIDED UNDER THE LICENSE TERMS OF THE ATTACHED LICENSE.TXT.
 */
!function(e){e.module("sofa.inject").directive("sofaInject",["$templateCache","$http","$compile","injectsService","deviceService",function(e,t,c,r,n){"use strict";return{restrict:"EA",replace:!0,scope:{target:"@"},link:function(i,a){i.injectsService=r,i.deviceService=n,i.$parent.product&&(i.product=i.$parent.product);var u=r.getTemplate(i.target);null===u?a.remove():t.get(u,{cache:e}).success(function(e){a.replaceWith(c(e)(i))})}}}]),e.module("sofa.inject").factory("injectsService",["$location","configService",function(e,t){"use strict";var c={},r=t.get("resourceUrl")+"html/",n=t.get("injects",[]).reduce(function(e,t){var c=t.url+"_"+t.target;return e[c]={template:t.template+".html",target:t.target},e},{}),i=function(e,t){return a(t)+"_"+e},a=function(t){return t||e.path()};return c.hasInject=function(e,t){return!cc.Util.isUndefined(n[i(e,t)])},c.getTemplate=function(e){return c.hasInject(e)?r+n[i(e)].template:c.hasInject(e,"*")?r+n[i(e,"*")].template:null},c}])}(angular);